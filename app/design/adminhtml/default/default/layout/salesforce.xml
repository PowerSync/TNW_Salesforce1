<?xml version="1.0"?>
<layout>
    <tnw_salesforce_admin>
        <reference name="head">
            <action method="addJs">
                <file>tnw-salesforce/admin/js/adminhtml.js</file>
            </action>
            <action method="addItem">
                <type>js_css</type>
                <file>tnw-salesforce/admin/css/adminhtml.css</file>
            </action>
        </reference>
    </tnw_salesforce_admin>

    <tnw_salesforce_chosen>
        <reference name="head">
            <action method="addJs">
                <file>tnw-salesforce/chosen/chosen.proto.min.js</file>
            </action>
            <action method="addItem">
                <type>js_css</type>
                <file>tnw-salesforce/chosen/chosen.min.css</file>
            </action>
            <action method="addJs">
                <file>tnw-salesforce/chosen-enable.js</file>
            </action>
            <action method="addJs">
                <file>tnw-salesforce/prototype-simulate.js</file>
            </action>
            <action method="addItem">
                <type>js_css</type>
                <file>tnw-salesforce/chosen-enable.css</file>
            </action>
        </reference>
    </tnw_salesforce_chosen>

    <tnw_salesforce_select2>
        <reference name="head">
            <action method="addJs">
                <file>lib/jquery/jquery-1.10.2.min.js</file>
            </action>
            <action method="addJs">
                <file>lib/jquery/noconflict.js</file>
            </action>
            <action method="addJs">
                <file>tnw-salesforce/select2/js/select2.min.js</file>
            </action>
            <action method="addJs">
                <file>tnw-salesforce/select2-enable.js</file>
            </action>
            <action method="addItem">
                <type>js_css</type>
                <file>tnw-salesforce/select2/css/select2.min.css</file>
            </action>
        </reference>
    </tnw_salesforce_select2>

    <default>
        <update handle="tnw_salesforce_admin"/>
    </default>

    <adminhtml_system_config_edit>
        <update handle="tnw_salesforce_chosen"/>
        <reference name="content">
            <block type="tnw_salesforce/adminhtml_check" name="tnw_salesforce.test.results" before="-"
                   template="salesforce/config/test/results.phtml">
                <block type="tnw_salesforce/adminhtml_check_grid" name="sf_test_results" as="sf_test_results"/>
            </block>
        </reference>
    </adminhtml_system_config_edit>

    <adminhtml_salesforcesync_ordersync_grid>
        <update handle="formkey"/>
        <block type="tnw_salesforce/adminhtml_ordersync_grid" name="ordersync.grid" output="toHtml"></block>
    </adminhtml_salesforcesync_ordersync_grid>

    <adminhtml_salesforcesync_abandonedsync_grid>
        <update handle="formkey"/>
        <block type="tnw_salesforce/adminhtml_abandonedsync_grid" name="abandonedsync.grid" output="toHtml"></block>
    </adminhtml_salesforcesync_abandonedsync_grid>

    <adminhtml_salesforcesync_productsync_grid>
        <update handle="formkey"/>
        <block type="tnw_salesforce/adminhtml_productsync_grid" name="productsync.grid" output="toHtml"></block>
    </adminhtml_salesforcesync_productsync_grid>

    <adminhtml_salesforcesync_customersync_grid>
        <update handle="formkey"/>
        <block type="tnw_salesforce/adminhtml_customersync_grid" name="customersync.grid" output="toHtml"></block>
    </adminhtml_salesforcesync_customersync_grid>

    <adminhtml_salesforcesync_queuesync_grid>
        <update handle="formkey"/>
        <block type="tnw_salesforce/adminhtml_queuesync_grid" name="queuesync.grid" output="toHtml"></block>
    </adminhtml_salesforcesync_queuesync_grid>

    <adminhtml_salesforcesync_invoicesync_grid>
        <update handle="formkey"/>
        <block type="tnw_salesforce/adminhtml_invoicesync_grid" name="invoicesync.grid" output="toHtml"></block>
    </adminhtml_salesforcesync_invoicesync_grid>

    <adminhtml_salesforcesync_shipmentsync_grid>
        <update handle="formkey"/>
        <block type="tnw_salesforce/adminhtml_shipmentsync_grid" name="shipmentsync.grid" output="toHtml"></block>
    </adminhtml_salesforcesync_shipmentsync_grid>

    <!-- Order View Page -->
    <adminhtml_sales_order_view>
        <reference name="sales_order_tabs">
            <block type="tnw_salesforce/sales_order_view_tab_salesforce" name="order_tab_salesforce"
                   template="salesforce/sales/order/view/tab/salesforce.phtml">
                <block type="tnw_salesforce/sales_order_view_tab_salesforce_info" name="salesforce_info"
                       template="salesforce/sales/order/view/tab/salesforce/info.phtml"></block>
                <block type="tnw_salesforce/sales_order_view_tab_salesforce_form" name="salesforce_form"></block>
            </block>
            <action method="addTab">
                <name>order_salesforce</name>
                <block>order_tab_salesforce</block>
            </action>
        </reference>
    </adminhtml_sales_order_view>

    <!-- Disable Cache -->
    <reference name="tnw_salesforce.test.results">
        <action method="setCacheLifetime"/>
    </reference>
    <reference name="sf_test_results">
        <action method="setCacheLifetime"/>
    </reference>

    <!-- Enabled chosen selects -->
    <adminhtml_salesforce_product_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_product_edit>

    <adminhtml_salesforce_lead_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_lead_edit>

    <adminhtml_salesforce_contact_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_contact_edit>

    <adminhtml_salesforce_account_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_account_edit>

    <adminhtml_salesforce_account_matching_edit>
        <update handle="tnw_salesforce_select2"/>
    </adminhtml_salesforce_account_matching_edit>

    <adminhtml_system_config_edit>
        <update handle="tnw_salesforce_select2"/>
    </adminhtml_system_config_edit>

    <adminhtml_salesforce_abandoned_opportunity_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_abandoned_opportunity_edit>

    <adminhtml_salesforce_abandoned_opportunitylineitem_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_abandoned_opportunitylineitem_edit>

    <adminhtml_salesforce_order_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_order_edit>

    <adminhtml_salesforce_orderproduct_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_orderproduct_edit>

    <adminhtml_salesforce_opportunity_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_opportunity_edit>

    <adminhtml_salesforce_opportunitylineitem_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_opportunitylineitem_edit>

    <adminhtml_catalog_product_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_catalog_product_edit>

    <adminhtml_salesforce_orderinvoice_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_orderinvoice_edit>

    <adminhtml_salesforce_orderinvoiceitem_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_orderinvoiceitem_edit>

    <adminhtml_salesforce_ordershipment_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_ordershipment_edit>

    <adminhtml_salesforce_ordershipmentitem_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_ordershipmentitem_edit>

    <adminhtml_salesforce_campaign_catalogrule_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_campaign_catalogrule_edit>

    <adminhtml_salesforce_campaign_salesrule_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_campaign_salesrule_edit>

    <adminhtml_salesforce_campaign_member_edit>
        <update handle="tnw_salesforce_chosen"/>
    </adminhtml_salesforce_campaign_member_edit>

    <adminhtml_tool_log_file_view>
        <reference name="head">
            <action method="addJs">
                <file>tnw-salesforce/admin/js/loadMore.js</file>
            </action>
        </reference>
    </adminhtml_tool_log_file_view>

    <adminhtml_promo_quote_edit>
        <update handle="tnw_salesforce_chosen"/>
        <reference name="promo_quote_edit_tabs">
            <block type="tnw_salesforce/adminhtml_promo_edit_tab_main" name="promo_quote_edit_tab_salesforce" />
            <action method="addTab"><name>salesforce_section</name><block>promo_quote_edit_tab_salesforce</block></action>
        </reference>
    </adminhtml_promo_quote_edit>
</layout>
